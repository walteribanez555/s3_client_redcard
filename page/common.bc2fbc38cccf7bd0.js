"use strict";(self.webpackChunkredcard=self.webpackChunkredcard||[]).push([[592],{67420:(O,g,t)=>{t.d(g,{m:()=>a});var l=t(69862),s=t(94946),n=t(94664),i=t(22096),r=t(37398),f=t(20553),v=t(31111),m=t(68359);let a=(()=>{var h;class M{constructor(){this.http=(0,s.f3M)(l.eN),this.apiUrl=f.N.apiAuthUrl+"/sessions",this.clienteService=(0,s.f3M)(m.Yy)}login(p){return this.http.post(this.apiUrl,p).pipe((0,n.w)(d=>{const[C,...P]=p.username.split("_");return localStorage.setItem("username",C),localStorage.setItem("office_id",P.join()),v.W.setToken(d.sessionToken),this.getClientId(C).pipe((0,n.w)(()=>(0,i.of)(d)))}))}getClientId(p){return this.clienteService.getOne(p).pipe((0,r.U)(d=>{if(!d||0===d.length)throw new Error("No se encontr\xf3");return localStorage.setItem("client_id",d[0].cliente_id.toString()),d}))}logout(){localStorage.removeItem("client_id"),localStorage.removeItem("username"),localStorage.removeItem("office_id"),v.W.deleteToken()}}return(h=M).\u0275fac=function(p){return new(p||h)},h.\u0275prov=s.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),M})()},62308:(O,g,t)=>{t.d(g,{K:()=>i});var l=t(69862),s=t(94946),n=t(20553);let i=(()=>{var r;class f{constructor(){this.http=(0,s.f3M)(l.eN),this.apiUrl=n.N.apiAuthUrl+"/users"}getUser(m){let a=new l.LE;return a=a.append("id",m),this.http.get(this.apiUrl,{params:a})}}return(r=f).\u0275fac=function(m){return new(m||r)},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),f})()},89716:(O,g,t)=>{t.r(g),t.d(g,{AuthModule:()=>P});var l=t(96814),s=t(40228),n=t(94946);let i=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,_){1&e&&n._UZ(0,"router-outlet")},dependencies:[s.lC]}),c})();var r=t(56223),f=t(67420),v=t(6572),m=t(78645),a=t(15087);const M=[{path:"",component:i,children:[{path:"login",component:(()=>{var o;class c{constructor(){this.router=(0,n.f3M)(s.F0),this.authForm=new r.cw({username:new r.NI(null,[r.kI.required]),password:new r.NI(null,[r.kI.required])}),this.sessionService=(0,n.f3M)(f.m),this.notificationModalService=(0,n.f3M)(v.g)}ngOnInit(){this.isAuth()}login(){if(!this.authForm.valid)return;const e=new m.x,_=e.asObservable();this.onLoading(_);const{username:b,password:U}=this.authForm.value;this.sessionService.login({username:b,password:U}).subscribe({next:E=>{e.complete(),this.onSuccess("Ingresando a la plataforma")},error:E=>{e.complete(),this.onError("Error en el inicio de sesion")},complete:()=>{this.router.navigateByUrl("/dashboard/policies/list")}})}onSuccess(e){this.notificationModalService.show(e,{size:a.$u.normal,duration:3e3,positions:[a.iS.center],imageUrl:"assets/icons/check.svg",closeOnTouch:!0})}onError(e){this.notificationModalService.show(e,{size:a.$u.normal,duration:3e3,positions:[a.iS.center],imageUrl:"assets/icons/warning.svg",closeOnTouch:!0})}onLoading(e){this.notificationModalService.show("Cargando",{size:a.$u.normal,positions:[a.iS.center],imageUrl:"assets/icons/loading.svg",closeOnTouch:!1,notifier:e})}isAuth(){const e=localStorage.getItem("Authorization");e&&"ExternalUser902010"!==e&&this.router.navigateByUrl("/dashboard")}}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["ng-component"]],decls:28,vars:3,consts:[[1,"container"],[1,"login-container",3,"formGroup","ngSubmit"],[1,"left"],["src","assets/images/isologo-blanco.png","alt",""],[1,"right"],[1,"top"],[1,"fa-solid","fa-shield","fa-2xl"],[2,"border","2px solid var(--text-color)"],[1,"info"],[1,"field"],[1,"fa-solid","fa-user"],["formControlName","username","name","password","type","text","placeholder","User"],[1,"fa-solid","fa-lock"],["formControlName","password","name","password","type","password","placeholder","Password"],[1,"buttons-group"],["type","submit"],[1,"fa-solid","fa-door-closed"]],template:function(e,_){1&e&&(n.TgZ(0,"div",0)(1,"form",1),n.NdJ("ngSubmit",function(){return _.login()}),n.TgZ(2,"div",2),n._UZ(3,"img",3),n.qZA(),n.TgZ(4,"div",4)(5,"div",5),n._UZ(6,"i",6),n.TgZ(7,"h2"),n._uU(8,"Login"),n.qZA()(),n._UZ(9,"hr",7),n.TgZ(10,"div",8)(11,"div",9),n._UZ(12,"i",10),n.TgZ(13,"label"),n._uU(14,"Usuario"),n.qZA(),n._UZ(15,"input",11),n.qZA(),n._UZ(16,"hr"),n.TgZ(17,"div",9),n._UZ(18,"i",12),n.TgZ(19,"label"),n._uU(20,"Password"),n.qZA(),n._UZ(21,"input",13),n.qZA(),n._UZ(22,"hr"),n.TgZ(23,"div",14)(24,"button",15),n._UZ(25,"i",16),n.TgZ(26,"span"),n._uU(27,"Ingresar"),n.qZA()()()()()()()),2&e&&(n.xp6(1),n.Q6J("formGroup",_.authForm),n.xp6(23),n.ekj("active",_.authForm.valid))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".container[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:#dcdcdc;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_appears{0%{top:-10%;opacity:.1}to{top:0%;opacity:1}}.login-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:20px;border:3px solid gainsboro;height:80vh;width:60vw;display:grid;grid-template-columns:1fr 2fr;position:relative;animation:_ngcontent-%COMP%_appears 1s forwards;box-shadow:0 10px 25px #dcdcdc}.left[_ngcontent-%COMP%]{background-color:var(--main-color);border-radius:20px 0 0 20px;display:flex;align-items:center;justify-content:center}.left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45%;height:35%;object-fit:fill;padding:30px 20px;position:relative}.right[_ngcontent-%COMP%]{height:80vh;padding:20px;display:flex;align-items:center;justify-content:flex-start;flex-direction:column}.top[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:end}h2[_ngcontent-%COMP%]{font-weight:700;font-size:25px;padding-left:20px}.field[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:start;margin:30px 0;width:100%}hr[_ngcontent-%COMP%]{width:100%;border:1px solid gainsboro}.info[_ngcontent-%COMP%]{width:100%;height:70vh;align-items:start;justify-content:center;padding:20px;display:flex;flex-direction:column}.field[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main-color)}label[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--main-color);padding-left:20px}input[_ngcontent-%COMP%]{width:100%;border:none;padding:10px 20px;margin-left:20px;outline:none;font-size:20px;font-weight:700;color:var(--text-color);background:none}.buttons-group[_ngcontent-%COMP%]{width:100%;padding:20px;display:flex;flex-direction:row;align-items:end;justify-content:end}.buttons-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid gainsboro;background-color:#dcdcdc;color:#fff;border-radius:10px;font-weight:700;font-size:20px;transition:all .3s ease-in-out;cursor:pointer}.buttons-group[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#f04b46;color:#fff}.buttons-group[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:#fff}.buttons-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--main-color);transition:all .3s ease-in-out}button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:20px}.button[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{position:absolute;transition:all .3s ease-in-out;top:30px;left:30px}.back-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{outline:none;text-decoration:none;border:none;background-color:#f04b46;font-size:25px;font-weight:700;border-radius:10px;padding:10px 20px;color:#fff;cursor:pointer;transition:all .3s ease-in-out}.back-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transition:all .3s ease-in-out;background-color:var(--main-color)}@media (max-width: 1024px){.login-container[_ngcontent-%COMP%]{grid-template-columns:1fr;width:90vw}.left[_ngcontent-%COMP%]{display:none}.field[_ngcontent-%COMP%]{flex-direction:column}.buttons-group[_ngcontent-%COMP%]{justify-content:center}input[_ngcontent-%COMP%]{font-size:12px;margin-top:20px;border:1px solid var(--text-color)}hr[_ngcontent-%COMP%]{display:none}}"]}),c})()}]}];let x=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[s.Bz.forChild(M),s.Bz]}),c})();var p=t(81837),d=t(69862),C=t(62308);let P=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({providers:[f.m,C.K],imports:[l.ez,x,p.m,s.Bz,d.JF,r.u5,r.UX]}),c})()},15087:(O,g,t)=>{t.d(g,{iS:()=>l,$u:()=>s.$,Ul:()=>n});var l=function(i){return i.center="center",i.left="left",i.right="right",i.top="top",i.bottom="bottom",i}(l||{}),s=t(26777),n=function(i){return i.success="assets/icons/check.svg",i.error="assets/icons/error.svg",i.warning="assets/icons/warning.svg",i.loading="assets/icons/loading.svg",i}(n||{})}}]);